timeline
    title Segment Buffering Timeline

    section Startup Phase
        Request Start     : Client requests playback
                         : API returns manifest URL
        
        Wait (2-4s)      : FFmpeg starts encoding
                         : First segment encoding
        
        First Available  : Segment 0 ready
                         : Client can start playback
                         : Prefetch segments 1-2

    section Linear Playback
        Steady State     : 5 segments buffered ahead
                         : Encode rate > play rate
                         : Buffer health: Good
        
        Network Issue    : Bandwidth drops
                         : Buffer starts draining
                         : Reduce quality if needed
        
        Recovery         : Network recovers
                         : Rebuild buffer
                         : Restore quality

    section Seeking
        Seek Request     : User seeks to 5:30
                         : Clear current buffer
        
        Seek Processing  : Find segment at seek point
                         : Start prefetch from new position
                         : 2-3 segments prefetched
        
        Resume Play      : Playback resumes
                         : Rebuild full buffer